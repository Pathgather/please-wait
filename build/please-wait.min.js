/**
* Please Wait
* Display a nice loading screen while your app loads

* @author Pathgather <tech@pathgather.com>
* @copyright Pathgather 2014
* @license MIT <http://opensource.org/licenses/mit-license.php>
* @link https://github.com/Pathgather/please-wait
* @module pleaseWait
* @version 0.0.1
*/
!function(a,b){"object"==typeof exports?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a)}(this,function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;f=document.createElement("fakeelement"),d=!1,l=!1,c="animationend",k=null,e="Webkit Moz O ms".split(" "),j={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};for(g in j)if(m=j[g],null!=f.style[g]){k=m,l=!0;break}if(null!=f.style.animationName&&(d=!0),!d)for(n=0,o=e.length;o>n;n++)if(h=e[n],null!=f.style[""+h+"AnimationName"]){switch(h){case"Webkit":c="webkitAnimationEnd";break;case"Moz":c="animationend";break;case"O":c="oanimationend";break;case"ms":c="MSAnimationEnd"}d=!0;break}return b=function(){function a(a){var b,e,f,g;b=this.constructor._defaultOptions,this.options={},this.loaded=!1;for(e in b)g=b[e],this.options[e]=null!=a[e]?a[e]:g;this._loadingElem=document.createElement("div"),this._loadingHtmlToDisplay=[],this._loadingElem.className="pg-loading-screen",null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor),this._loadingElem.innerHTML=this.options.template,this._loadingHtmlElem=this._loadingElem.getElementsByClassName("pg-loading-html")[0],null!=this._loadingHtmlElem&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml),this._readyToShowLoadingHtml=!1,this._logoElem=this._loadingElem.getElementsByClassName("pg-loading-logo")[0],null!=this._logoElem&&(this._logoElem.src=this.options.logo),document.body.className+=" pg-loading",document.body.appendChild(this._loadingElem),this._loadingElem.className+=" pg-loading",f=function(a){return function(){return a.loaded=!0,a._readyToShowLoadingHtml=!0,a._loadingHtmlElem.className+=" pg-loaded",d&&a._loadingHtmlElem.removeEventListener(c,f),a._loadingHtmlToDisplay.length>0?a._changeLoadingHtml():void 0}}(this),null!=this._loadingHtmlElem&&(d?this._loadingHtmlElem.addEventListener(c,f):f(),this._loadingHtmlListener=function(a){return function(){return a._readyToShowLoadingHtml=!0,a._loadingHtmlElem.className=a._loadingHtmlElem.className.replace(" pg-loading ",""),l&&a._loadingHtmlElem.removeEventListener(k,a._loadingHtmlListener),a._loadingHtmlToDisplay.length>0?a._changeLoadingHtml():void 0}}(this),this._removingHtmlListener=function(a){return function(){return a._loadingHtmlElem.innerHTML=a._loadingHtmlToDisplay.shift(),a._loadingHtmlElem.className=a._loadingHtmlElem.className.replace(" pg-removing "," pg-loading "),l?(a._loadingHtmlElem.removeEventListener(k,a._removingHtmlListener),a._loadingHtmlElem.addEventListener(k,a._loadingHtmlListener)):a._loadingHtmlListener()}}(this))}return a._defaultOptions={backgroundColor:null,logo:null,loadingHtml:null,template:"<div class='pg-loading-inner'>\n  <div class='pg-loading-center-outer'>\n    <div class='pg-loading-center-middle'>\n      <h1 class='pg-loading-logo-header'>\n        <img class='pg-loading-logo'></img>\n      </h1>\n      <div class='pg-loading-html'>\n      </div>\n    </div>\n  </div>\n</div>"},a.prototype.finish=function(a){var b;return null==a&&(a=!1),null!=this._loadingElem?this.loaded||a?this._finish():(b=function(a){return function(){return a._loadingElem.removeEventListener(c,b),window.setTimeout(function(){return a._finish()},1)}}(this),this._loadingHtmlElem.addEventListener(c,b)):void 0},a.prototype.updateOption=function(a,b){switch(a){case"backgroundColor":return this._loadingElem.style.backgroundColor=b;case"logo":return this._logoElem.src=b;case"loadingHtml":return this.updateLoadingHtml(b);default:throw new Error("Unknown option '"+a+"'")}},a.prototype.updateOptions=function(a){var b,c,d;null==a&&(a={}),d=[];for(b in a)c=a[b],d.push(this.updateOption(b,c));return d},a.prototype.updateLoadingHtml=function(a,b){if(null==b&&(b=!1),null==this._loadingHtmlElem)throw new Error("The loading template does not have an element of class 'pg-loading-html'");return b?(this._loadingHtmlToDisplay=[a],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(a),this._readyToShowLoadingHtml?this._changeLoadingHtml():void 0},a.prototype._changeLoadingHtml=function(){return this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(k,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(k,this._removingHtmlListener),this._loadingHtmlElem.className=this._loadingHtmlElem.className.replace(" pg-loading ","").replace(" pg-removing ",""),l?(this._loadingHtmlElem.className+=" pg-removing ",this._loadingHtmlElem.addEventListener(k,this._removingHtmlListener)):this._removingHtmlListener()},a.prototype._finish=function(){var a;return document.body.className+=" pg-loaded",a=function(b){return function(){return document.body.removeChild(b._loadingElem),document.body.className=document.body.className.replace("pg-loading",""),d&&b._loadingElem.removeEventListener(c,a),b._loadingElem=null}}(this),d?(this._loadingElem.className+=" pg-loaded",this._loadingElem.addEventListener(c,a)):a()},a}(),i=function(a){return null==a&&(a={}),new b(a)},a.pleaseWait=i,i});